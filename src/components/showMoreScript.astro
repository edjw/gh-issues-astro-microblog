<script is:inline>
  function main() {
    const allPosts = Array.from(document.querySelectorAll("li.postWrapper"));

    allPosts.forEach((post) => {
      const contentWrapper = post.querySelector("div.contentWrapper");
      if (!contentWrapper) return;

      const postContent = post.querySelector("div.postContent");
      if (!postContent) return;

      const showMoreButtonWrapper = post.querySelector(
        "div.showMoreButtonWrapper"
      );
      if (!showMoreButtonWrapper) return;

      const showMoreButton = showMoreButtonWrapper.querySelector("button");
      if (!showMoreButton) return;

      const contentWrapperHeight = contentWrapper.offsetHeight;
      const postContentHeight = postContent.scrollHeight;

      if (postContentHeight <= contentWrapperHeight) return;

      showMoreButtonWrapper.classList.remove("hidden");

      showMoreButton.addEventListener("click", () => {
        contentWrapper.classList.remove("max-h-[512px]");
        showMoreButtonWrapper.classList.add("hidden");
      });
    });
  }

  document.onreadystatechange = () => {
    if (document.readyState === "complete") {
      main();
    }
  };
</script>
