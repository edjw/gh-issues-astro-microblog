<script>
  const allPosts = Array.from(
    document.querySelectorAll("li.postWrapper")
  ) as HTMLLIElement[];

  allPosts.forEach((post) => {
    const postContent = post.querySelector("div.postContent") as HTMLDivElement;
    if (!postContent) return;

    const showMoreButtonWrapper = post.querySelector(
      "div.showMoreButtonWrapper"
    ) as HTMLDivElement;
    if (!showMoreButtonWrapper) return;

    const showMoreButton = showMoreButtonWrapper.querySelector(
      "button"
    ) as HTMLButtonElement;
    if (!showMoreButton) return;

    const postHeight = postContent.getBoundingClientRect().height;

    if (postHeight < 300) return;

    showMoreButtonWrapper.classList.remove("hidden");

    showMoreButton.addEventListener("click", () => {
      postContent.classList.remove("max-h-80");
      showMoreButtonWrapper.classList.add("hidden");
    });
  });
</script>
