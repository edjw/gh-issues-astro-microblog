<script>
  const allPosts = Array.from(
    document.querySelectorAll("li.postWrapper")
  ) as HTMLLIElement[];

  allPosts.forEach((post) => {
    const postContent = post.querySelector("div.postContent") as HTMLDivElement;
    const showMoreButtonWrapper = post.querySelector(
      "div.showMoreButtonWrapper"
    ) as HTMLDivElement;
    const showMoreButton = showMoreButtonWrapper.querySelector(
      "button"
    ) as HTMLButtonElement;
    if (!postContent) return;
    if (!showMoreButtonWrapper) return;
    if (!showMoreButton) return;

    const postHeight = postContent.getBoundingClientRect().height;

    if (postHeight > 300) {
      showMoreButtonWrapper.classList.remove("hidden");
    }

    showMoreButton.addEventListener("click", () => {
      postContent.classList.remove("max-h-80");
      showMoreButtonWrapper.classList.add("hidden");
    });
  });
</script>
